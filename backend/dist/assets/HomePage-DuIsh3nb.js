import{c as r,j as e,u as p,r as d,a as n,b as j,L as y,U as N,s as f,g as b,d as v,e as q}from"./index-Bv7HPkaF.js";import{F,g as k}from"./FriendCard-BpD0Spwq.js";import{M as w}from"./map-pin-CQYNaK-l.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C=r("circle-check-big",R);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_=r("user-plus",L),S=t=>t.charAt(0).toUpperCase()+t.slice(1),U=()=>e.jsxs("div",{className:"card bg-base-200 p-6 text-center",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No friends yet"}),e.jsx("p",{className:"text-base-content opacity-70",children:"Connect with new people below to start talking together!"})]}),E=()=>{const t=p(),[o,m]=d.useState(new Set),{data:l=[],isLoading:g}=n({queryKey:["friends"],queryFn:b}),{data:c=[],isLoading:x}=n({queryKey:["users"],queryFn:v}),{data:i}=n({queryKey:["outgoingFriendReqs"],queryFn:q}),{mutate:h,isPending:u}=j({mutationFn:f,onSuccess:()=>t.invalidateQueries({queryKey:["outgoingFriendReqs"]})});return d.useEffect(()=>{const s=new Set;i&&i.length>0&&(i.forEach(a=>{s.add(a.recipient._id)}),m(s))},[i]),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"container mx-auto space-y-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Your Friends"}),e.jsxs(y,{to:"/notifications",className:"btn btn-outline btn-sm",children:[e.jsx(N,{className:"mr-2 size-4"}),"Friend Requests"]})]}),g?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):l.length===0?e.jsx(U,{}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(s=>e.jsx(F,{friend:s},s._id))}),e.jsxs("section",{children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Make New Friends"}),e.jsx("p",{className:"opacity-70",children:"Sent request and make new friends to start chatting!"})]})})}),x?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):c.length===0?e.jsxs("div",{className:"card bg-base-200 p-6 text-center",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No recommendations available"}),e.jsx("p",{className:"text-base-content opacity-70",children:"Check back later for new language partners!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{const a=o.has(s._id);return e.jsx("div",{className:"card bg-base-200 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"card-body p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar size-16 rounded-full",children:e.jsx("img",{src:s.profilePic,alt:s.fullName})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.fullName}),s.location&&e.jsxs("div",{className:"flex items-center text-xs opacity-70 mt-1",children:[e.jsx(w,{className:"size-3 mr-1"}),s.location]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.jsxs("span",{className:"badge badge-secondary",children:[k(s.nativeLanguage),"Native: ",S(s.nativeLanguage)]})}),s.bio&&e.jsx("p",{className:"text-sm opacity-70",children:s.bio}),e.jsx("button",{className:`btn w-full mt-2 ${a?"btn-disabled":"btn-primary"} `,onClick:()=>h(s._id),disabled:a||u,children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"size-4 mr-2"}),"Request Sent"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"size-4 mr-2"}),"Send Friend Request"]})})]})},s._id)})})]})]})})};export{E as default};
